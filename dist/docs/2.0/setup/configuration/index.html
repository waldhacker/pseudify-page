<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="waldhacker UG (haftungsbeschrÃ¤nkt)" /><link rel="canonical" href="https://www.pseudify.me/docs/2.0/setup/configuration/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Configuration - pseudify.me</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Configuration";
        var mkdocs_page_input_path = "setup/configuration.md";
        var mkdocs_page_url = "/docs/2.0/setup/configuration/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
 <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> pseudify.me
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Introduction</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../..">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Setup</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Configuration</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#the-install-package">The install package</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#configuration-options">Configuration options</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#env">.env</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#pseudify_faker_locale">PSEUDIFY_FAKER_LOCALE</a>
        <ul>
    <li class="toctree-l5"><a class="reference internal" href="#example">Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#pseudify_database_driver">PSEUDIFY_DATABASE_DRIVER</a>
        <ul>
    <li class="toctree-l5"><a class="reference internal" href="#example_1">Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#pseudify_database_host">PSEUDIFY_DATABASE_HOST</a>
        <ul>
    <li class="toctree-l5"><a class="reference internal" href="#example_2">Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#pseudify_database_port">PSEUDIFY_DATABASE_PORT</a>
        <ul>
    <li class="toctree-l5"><a class="reference internal" href="#example_3">Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#pseudify_database_user">PSEUDIFY_DATABASE_USER</a>
        <ul>
    <li class="toctree-l5"><a class="reference internal" href="#example_4">Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#pseudify_database_password">PSEUDIFY_DATABASE_PASSWORD</a>
        <ul>
    <li class="toctree-l5"><a class="reference internal" href="#example_5">Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#pseudify_database_schema">PSEUDIFY_DATABASE_SCHEMA</a>
        <ul>
    <li class="toctree-l5"><a class="reference internal" href="#example_6">Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#pseudify_database_charset">PSEUDIFY_DATABASE_CHARSET</a>
        <ul>
    <li class="toctree-l5"><a class="reference internal" href="#example_7">Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#pseudify_database_version">PSEUDIFY_DATABASE_VERSION</a>
        <ul>
    <li class="toctree-l5"><a class="reference internal" href="#example_8">Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#pseudify_database_ssl_insecure">PSEUDIFY_DATABASE_SSL_INSECURE</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#advanced-connection-settings">Advanced connection settings</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#multiple-connection-configurations">Multiple connection configurations</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#custom-extensions">Custom extensions</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#registering-custom-database-types">Registering custom database types</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#registering-custom-faker-formatters">Registering custom faker formatters</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#registering-custom-decoders-encoders">Registering custom decoders / encoders</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#register-custom-condition-expressions">Register custom condition expressions</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#manage-database-access">Manage database access</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#access-a-database-running-on-your-host-system">Access a database running on your host system</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#pseudify-is-running-as-a-standalone-binary-pseudonymization-setup">Pseudify is running as a standalone binary (pseudonymization setup)</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#pseudify-is-running-using-docker-compose-analyze-setup">pseudify is running using docker compose (analyze setup)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#access-a-database-using-docker-services">Access a database using docker services</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#pseudify-is-running-as-a-standalone-binary-pseudonymization-setup_1">pseudify is running as a standalone binary (pseudonymization setup)</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#pseudify-is-running-using-docker-compose-analyze-setup_1">pseudify is running using docker compose (analyze setup)</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#debug-the-configuration">Debug the configuration</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pseudifyinformation">pseudify:information</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#debugconfig-doctrinebundle">debug:config DoctrineBundle</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#debugdotenv">debug:dotenv</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Usage</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../usage/">Analyse and pseudonymize the database</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Miscellaneous</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../whatToPseudonymize/">What to pseudonymise?</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../development/">Development</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../versions/">Versions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../license/">License</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/">About the project</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">pseudify.me</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Setup</li>
      <li class="breadcrumb-item active">Configuration</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/waldhacker/pseudify-page/edit/main/src/documentation/docs/setup/configuration.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="configuration">Configuration</h1>
<h2 id="the-install-package">The install package</h2>
<p>The installation package contains everything necessary for the proper operation of pseudify.<br />
This includes the configuration files to connect pseudify to a database and examples of how pseudify can be functionally extended.<br />
The files are to be understood as start templates that you can adapt to your own requirements.</p>
<p>Content:</p>
<ul>
<li><strong>docker-compose.yml</strong>: Starts pseudify with the GUI for analyzing the database and modeling pseudonymization tasks (we call it the <code>analyze setup</code>).</li>
<li><strong>docker-compose.llm-addon.yml</strong>: Extends the <code>analyze setup</code> with AI capabilities. Pseudify uses this locally running LLM to determine personally identifiable information (PII). The data is processed exclusively on your computer and does not leave it.</li>
<li><strong>docker-compose.database.yml</strong>: Contains an example of how a database server can be started via docker compose if you need it.</li>
<li><strong>userdata/</strong>: This folder contains everything you need to configure and extend pseudify.</li>
<li><strong>userdata/.env.example</strong>: An example of the basic configuration of pseudify. Pseudify mainly uses env variables for the basic configuration.</li>
<li><strong>userdata/config/</strong>: This folder contains files for advanced configuration.</li>
<li><strong>userdata/src/</strong>: This folder contains the analysis and pseudonymization profile(s) that you have created with the GUI. This folder also includes examples for custom functional extensions.</li>
<li><strong>userdata/src/Encoder/</strong>: This folder contains an example of a custom data encoder implementation (<code>Rot13Encoder</code>).</li>
<li><strong>userdata/src/Faker/</strong>: This folder contains an example of a custom data faker implementation (<code>BobRossLipsum</code>).</li>
<li><strong>userdata/src/Processing/</strong>: This folder contains an example of a custom condition expression implementation (<code>isBobRoss()</code>).</li>
<li><strong>userdata/src/Profiles/</strong>: This folder contains the pseudify profiles. It can contain the <code>low-level profiles (PHP)</code> or the YAML profiles created via the GUI.</li>
<li><strong>userdata/src/Profiles/Yaml/</strong>: This folder contains the YAML pseudify profiles created via the GUI.</li>
<li><strong>userdata/src/Types/</strong>: This folder contains an example of custom database type implementations (<code>Enum</code> and <code>Set</code>).</li>
</ul>
<h2 id="configuration-options">Configuration options</h2>
<h3 id="env">.env</h3>
<p>The basic configuration of pseudify takes place using values in an <code>.env</code> file.<br />
The <a href="https://github.com/waldhacker/pseudify-ai/releases/latest/"><code>install package</code></a> contain an <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/userdata/.env.example">exemplary .env file</a> which can be used as a basis for your own configuration.  </p>
<h4 id="pseudify_faker_locale">PSEUDIFY_FAKER_LOCALE</h4>
<p>Default: en_US</p>
<p>Pseudify uses the <a href="https://fakerphp.github.io/">FakerPHP/Faker component</a> to generate the pseudonyms.<br />
The component allows <a href="https://fakerphp.github.io/#language-specific-formatters">the generation of language-specific values</a>.<br />
Supported values of <code>PSEUDIFY_FAKER_LOCALE</code> can be found in the <a href="https://github.com/FakerPHP/Faker/tree/v1.20.0/src/Faker/Provider">FakerPHP/Faker Repository</a>.  </p>
<h5 id="example">Example</h5>
<pre class="highlight"><code class="language-shell">PSEUDIFY_FAKER_LOCALE=de_DE</code></pre>
<h4 id="pseudify_database_driver">PSEUDIFY_DATABASE_DRIVER</h4>
<p>Default: pdo_mysql<br />
Resolves to connection parameter: <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/config/packages/doctrine.yaml#L5"><code>doctrine.dbal.connections.default.driver</code></a></p>
<p>The value of <code>PSEUDIFY_DATABASE_DRIVER</code> must be <a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#driver">a supported driver of the Doctrine DBAL component</a>.<br />
The pseudify docker container comes with the following driver support:</p>
<ul>
<li>pdo_mysql (A MySQL driver that uses the pdo_mysql PDO extension</li>
<li>mysqli (A MySQL driver that uses the mysqli extension</li>
<li>pdo_pgsql (A PostgreSQL driver that uses the pdo_pgsql PDO extension)</li>
<li>pdo_sqlite (An SQLite driver that uses the pdo_sqlite PDO extension)</li>
<li>sqlite3 (An SQLite driver that uses the sqlite3 extension)</li>
<li>pdo_sqlsrv (A Microsoft SQL Server driver that uses pdo_sqlsrv PDO)</li>
<li>sqlsrv (A Microsoft SQL Server driver that uses the sqlsrv PHP extension)</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Support for the <code>oci8</code> driver for Oracle databases should be possible (pull requests are welcome).</p>
</div>
<h5 id="example_1">Example</h5>
<pre class="highlight"><code class="language-shell">PSEUDIFY_DATABASE_DRIVER=pdo_mysql</code></pre>
<h4 id="pseudify_database_host">PSEUDIFY_DATABASE_HOST</h4>
<p>Default: &lt;empty&gt;<br />
Resolves to connection parameter: <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/config/packages/doctrine.yaml#L6"><code>doctrine.dbal.connections.default.host</code></a></p>
<p>The host name under which the database server can be reached.<br />
This value is only used when using the following drivers:</p>
<ul>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-mysql">pdo_mysql</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#mysqli">mysqli</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-pgsql-pgsql">pdo_pgsql</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-oci-oci8">oci8</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-sqlsrv-sqlsrv">pdo_sqlsrv</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-sqlsrv-sqlsrv">sqlsrv</a></li>
</ul>
<h5 id="example_2">Example</h5>
<pre class="highlight"><code class="language-shell">PSEUDIFY_DATABASE_HOST=host.docker.internal</code></pre>
<h4 id="pseudify_database_port">PSEUDIFY_DATABASE_PORT</h4>
<p>Default: &lt;empty&gt;<br />
Resolves to connection parameter: <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/config/packages/doctrine.yaml#L7"><code>doctrine.dbal.connections.default.port</code></a></p>
<p>The port under which the database server can be reached.<br />
This value is only used when using the following drivers:</p>
<ul>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-mysql">pdo_mysql</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#mysqli">mysqli</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-pgsql-pgsql">pdo_pgsql</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-oci-oci8">oci8</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-sqlsrv-sqlsrv">pdo_sqlsrv</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-sqlsrv-sqlsrv">sqlsrv</a></li>
</ul>
<h5 id="example_3">Example</h5>
<pre class="highlight"><code class="language-shell">PSEUDIFY_DATABASE_PORT=3306</code></pre>
<h4 id="pseudify_database_user">PSEUDIFY_DATABASE_USER</h4>
<p>Default: &lt;empty&gt;<br />
Resolves to connection parameter: <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/config/packages/doctrine.yaml#L8"><code>doctrine.dbal.connections.default.user</code></a></p>
<p>The user name of the database.<br />
This value is only used when using the following drivers:</p>
<ul>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-sqlite">pdo_sqlite</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-mysql">pdo_mysql</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#mysqli">mysqli</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-pgsql-pgsql">pdo_pgsql</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-oci-oci8">oci8</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-sqlsrv-sqlsrv">pdo_sqlsrv</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-sqlsrv-sqlsrv">sqlsrv</a></li>
</ul>
<h5 id="example_4">Example</h5>
<pre class="highlight"><code class="language-shell">PSEUDIFY_DATABASE_USER=pseudify</code></pre>
<h4 id="pseudify_database_password">PSEUDIFY_DATABASE_PASSWORD</h4>
<p>Default: &lt;empty&gt;<br />
Resolves to connection parameter: <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/config/packages/doctrine.yaml#L9"><code>doctrine.dbal.connections.default.password</code></a></p>
<p>The password of the database.<br />
This value is only used when using the following drivers:</p>
<ul>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-sqlite">pdo_sqlite</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-mysql">pdo_mysql</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#mysqli">mysqli</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-pgsql-pgsql">pdo_pgsql</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-oci-oci8">oci8</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-sqlsrv-sqlsrv">pdo_sqlsrv</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-sqlsrv-sqlsrv">sqlsrv</a></li>
</ul>
<h5 id="example_5">Example</h5>
<pre class="highlight"><code class="language-shell">PSEUDIFY_DATABASE_PASSWORD='super(!)sEcReT'</code></pre>
<h4 id="pseudify_database_schema">PSEUDIFY_DATABASE_SCHEMA</h4>
<p>Default: &lt;empty&gt;<br />
Resolves to connection parameter: <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/config/packages/doctrine.yaml#L10"><code>doctrine.dbal.connections.default.dbname</code></a> or <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/config/packages/doctrine.yaml#L11"><code>doctrine.dbal.connections.default.path</code></a></p>
<p>For the following drivers, <code>PSEUDIFY_DATABASE_SCHEMA</code> corresponds to the database name:</p>
<ul>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-mysql">pdo_mysql</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#mysqli">mysqli</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-pgsql-pgsql">pdo_pgsql</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-oci-oci8">oci8</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-sqlsrv-sqlsrv">pdo_sqlsrv</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-sqlsrv-sqlsrv">sqlsrv</a></li>
</ul>
<p>For the following drivers, <code>PSEUDIFY_DATABASE_SCHEMA</code> corresponds to the file system path to the database:</p>
<ul>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-sqlite">pdo_sqlite</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#sqlite3">sqlite3</a></li>
</ul>
<h5 id="example_6">Example</h5>
<pre class="highlight"><code class="language-shell">PSEUDIFY_DATABASE_SCHEMA=wordpress_prod</code></pre>
<h4 id="pseudify_database_charset">PSEUDIFY_DATABASE_CHARSET</h4>
<p>Default: utf8mb4<br />
Resolves to connection parameter: <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/config/packages/doctrine.yaml#L12"><code>doctrine.dbal.connections.default.charset</code></a></p>
<p>The character set used during the connection to the database.<br />
This value is only used when using the following drivers:</p>
<ul>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-mysql">pdo_mysql</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#mysqli">mysqli</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-pgsql-pgsql">pdo_pgsql</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-oci-oci8">oci8</a></li>
</ul>
<h5 id="example_7">Example</h5>
<pre class="highlight"><code class="language-shell">PSEUDIFY_DATABASE_CHARSET=utf8mb4</code></pre>
<h4 id="pseudify_database_version">PSEUDIFY_DATABASE_VERSION</h4>
<p>Default: &lt;empty&gt;<br />
Resolves to connection parameter: <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/config/packages/doctrine.yaml#L13"><code>doctrine.dbal.connections.default.server_version</code></a></p>
<p>Doctrine comes with different database platform implementations for some vendors to support version-specific features, dialects and behaviours.<br />
The drivers automatically detect the platform version and instantiate the appropriate platform class.<br />
If you want to disable automatic database platform detection and explicitly select the platform version implementation, you can do this with the value in <code>PSEUDIFY_DATABASE_VERSION</code>.  </p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>If you are using a MariaDB database, you should prefix the value <code>PSEUDIFY_DATABASE_VERSION</code> with <code>mariadb-</code> (example: mariadb-10.2).</p>
</div>
<h5 id="example_8">Example</h5>
<pre class="highlight"><code class="language-shell">PSEUDIFY_DATABASE_VERSION=8.0</code></pre>
<h4 id="pseudify_database_ssl_insecure">PSEUDIFY_DATABASE_SSL_INSECURE</h4>
<p>Default: &lt;empty&gt;<br />
Resolves to connection parameter: <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/config/packages/doctrine.yaml#L15"><code>doctrine.dbal.connections.default.options.TrustServerCertificate</code></a></p>
<p>If the value of <code>PSEUDIFY_DATABASE_SSL_INSECURE</code> is set to <code>1</code>, no check of the TLS certificate of the database server is performed.</p>
<p>This value is only used when using the following drivers:</p>
<ul>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-sqlsrv-sqlsrv">pdo_sqlsrv</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#pdo-sqlsrv-sqlsrv">sqlsrv</a></li>
</ul>
<pre class="highlight"><code class="language-shell">PSEUDIFY_DATABASE_SSL_INSECURE=1</code></pre>
<h3 id="advanced-connection-settings">Advanced connection settings</h3>
<p>If you need to configure other driver options, you can do so in the install package file <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/userdata/config/configuration.yaml#L8"><code>userdata/config/configuration.yaml</code></a>.<br />
Examples and information for driver options can be found in the following documents:</p>
<ul>
<li><a href="https://symfony.com/doc/6.4/reference/configuration/doctrine.html#doctrine-dbal-configuration">Symfony DoctrineBundle - Doctrine DBAL Configuration</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/configuration.html#connection-details">Doctrine DBAL- Connection Details</a></li>
</ul>
<p>After changes of the connection settings, the cache must be cleared </p>
<pre class="highlight"><code class="language-shell">pseudify cache:clear</code></pre>
<h4 id="multiple-connection-configurations">Multiple connection configurations</h4>
<p>It is possible to configure multiple connections.<br />
The <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/config/packages/doctrine.yaml#L4">connection named <code>default</code></a> is used as the default connection.<br />
In the install package file <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/userdata/config/configuration.yaml#L8"><code>userdata/config/configuration.yaml</code></a> further connections can be configured under a different name.</p>
<pre class="highlight"><code class="language-yaml">doctrine:
  dbal:
    connections:
      myCustomConnection:
        driver: sqlsrv
        # ...</code></pre>
<p>The configured connections can be used with the <code>--connection</code> parameter.</p>
<pre class="highlight"><code class="language-shell">pseudify pseudify:pseudonymize --connection myCustomConnection myPseudonymizationProfileName</code></pre>
<p>The following commands accept the <code>--connection</code> parameter:</p>
<ul>
<li><code>pseudify:analyze</code></li>
<li><code>pseudify:autoconfiguration</code></li>
<li><code>pseudify:debug:analyze</code></li>
<li><code>pseudify:debug:pseudonymize</code></li>
<li><code>pseudify:debug:table_schema</code></li>
<li><code>pseudify:pseudonymize</code></li>
</ul>
<h2 id="custom-extensions">Custom extensions</h2>
<h3 id="registering-custom-database-types">Registering custom database types</h3>
<p>If user-defined database types are required, you can define them at connection level in the install package file <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/userdata/config/configuration.yaml#L10-L12"><code>userdata/config/configuration.yaml</code></a>.  </p>
<p>Example implementations for user-defined database types can be found in the following install package files:</p>
<ul>
<li><a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/userdata/src/Types/TYPO3/EnumType.php">userdata/src/Types/TYPO3/EnumType.php</a></li>
<li><a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/userdata/src/Types/TYPO3/SetType.php">userdata/src/Types/TYPO3/SetType.php</a></li>
</ul>
<p>These user-defined database types can then be configured in the install package file <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/userdata/config/configuration.yaml"><code>userdata/config/configuration.yaml</code></a></p>
<pre class="highlight"><code class="language-yaml">doctrine:
  dbal:
    types:
      enum: Waldhacker\Pseudify\Types\TYPO3\EnumType
      set: Waldhacker\Pseudify\Types\TYPO3\SetType
    connections:
      default:
        mapping_types:
          enum: enum
          set: set</code></pre>
<p>Examples and information for user-defined data types can be found in the following documents:</p>
<ul>
<li><a href="https://symfony.com/doc/6.4/doctrine/dbal.html#registering-custom-mapping-types">Symfony DoctrineBundle - Registering custom Mapping Types</a></li>
<li><a href="https://symfony.com/doc/6.4/doctrine/dbal.html#registering-custom-mapping-types-in-the-schematool">Symfony DoctrineBundle - Registering custom Mapping Types in the SchemaTool</a></li>
<li><a href="https://www.doctrine-project.org/projects/doctrine-dbal/en/3.9/reference/types.html#custom-mapping-types">Doctrine DBAL - Custom Mapping Types</a></li>
</ul>
<p>After adding custom data types, the cache must be cleared. </p>
<pre class="highlight"><code class="language-shell">pseudify cache:clear</code></pre>
<h3 id="registering-custom-faker-formatters">Registering custom faker formatters</h3>
<p>The <a href="https://fakerphp.github.io/">FakerPHP/Faker component</a> comes with a lot of predefined formatters to generate various data formats.<br />
If you want to use custom formatters, you can look at the implementation of the <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/userdata/src/Faker/BobRossLipsumProvider.php">BobRossLipsumProvider</a> example.<br />
The custom formatter must implement the interface <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/src/Faker/FakeDataProviderInterface.php"><code>Waldhacker\Pseudify\Core\Faker\FakeDataProviderInterface</code></a> to be integrated into the system.<br />
The best way to see how formatters can generate data is to look at <a href="https://github.com/FakerPHP/Faker/tree/v1.20.0/src/Faker/Provider">the providers in the FakerPHP/Faker project</a>.  </p>
<p>After adding custom faker formatters, the cache must be cleared.  </p>
<pre class="highlight"><code class="language-shell">pseudify cache:clear</code></pre>
<h3 id="registering-custom-decoders-encoders">Registering custom decoders / encoders</h3>
<p>If you want to use custom decoders / encoders, you can see an implementation in the example of the <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/userdata/src/Encoder/Rot13Encoder.php">Rot13Encoder</a>.<br />
The custom decoder / encoder must implement the interface <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/src/Processor/Encoder/EncoderInterface.php"><code>Waldhacker\Pseudify\Core\Processor\Encoder\EncoderInterface</code></a> to be integrated into the system.<br />
The best way to see how decoders / encoders can decode and encode data is to look at <a href="https://github.com/waldhacker/pseudify-ai/tree/2.0.0/src/src/Processor/Encoder">the built-in decoders/encoders</a> like the <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/src/Processor/Encoder/Base64Encoder.php">Base64Encoder</a>.<br />
If you want your decoder / encoder to be configurable via the GUI, your encoder / decoder must provide a form type that defines the configuration form.<br />
Look at the <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/src/Processor/Encoder/Base64Encoder.php#L101">Base64Encoder</a> which provides the <a href="http://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/src/Gui/Form/ProfileDefinition/Column/Encoder/Base64EncoderType.php#L40">Base64EncoderType</a> to get an idea how to provide a configuration form.  </p>
<p>Additional information for user-defined form types can be found in the following document:</p>
<ul>
<li><a href="https://symfony.com/doc/6.4/form/create_custom_field_type.html#defining-the-form-type">Symfony Forms - How to Create a Custom Form Field Type</a></li>
</ul>
<p>After adding custom decoders/encoders, the cache must be cleared. </p>
<pre class="highlight"><code class="language-shell">pseudify cache:clear</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>User-defined decoders / encoders should follow the <code>&lt;Format&gt;Encoder</code> naming convention (e.g. <code>HexEncoder</code>, <code>Rot13Encoder</code> etc.).<br />
This ensures that debug commands like <code>pseudify:debug:analyse</code> can represent the names of the decoders / encoders well.  </p>
</div>
<h3 id="register-custom-condition-expressions">Register custom condition expressions</h3>
<p>If you want to use custom condition expressions, you can see an implementation in the example of the <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/userdata/src/Processing/ConditionExpressionProvider.php#L34-L41">ConditionExpressionProvider</a>.<br />
You need to define an description and an <a href="https://symfony.com/doc/6.4/components/expression_language.html#registering-functions"><code>Symfony\Component\ExpressionLanguage\ExpressionFunction</code></a> implementation which implements the <code>evaluator</code>.</p>
<p>Additional information for user-defined expressions can be found in the following document:</p>
<ul>
<li><a href="https://symfony.com/doc/6.4/components/expression_language.html#extending-the-expressionlanguage">Symfony ExpressionLanguage - Extending the ExpressionLanguage</a></li>
</ul>
<h2 id="manage-database-access">Manage database access</h2>
<p>Database access can be managed in various ways.<br />
Some variants are presented below.  </p>
<h3 id="access-a-database-running-on-your-host-system">Access a database running on your host system</h3>
<h4 id="pseudify-is-running-as-a-standalone-binary-pseudonymization-setup">Pseudify is running as a standalone binary (<code>pseudonymization setup</code>)</h4>
<p>Add the parameter <code>--add-host=host.docker.internal:host-gateway</code> to the <code>docker run</code> command.<br />
The option <code>PSEUDIFY_DATABASE_HOST</code> in the install package file <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/userdata/.env">userdata/.env</a> must be set to <code>host.docker.internal</code>.   </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For this variant to work, the port of the database server on the docker gateway (host system) must be open.</p>
</div>
<p>Then run pseudify like:</p>
<pre class="highlight"><code class="language-shell">$ docker run --rm -it --add-host=host.docker.internal:host-gateway -v "$(pwd)/userdata/":/opt/pseudify/userdata/ \
    ghcr.io/waldhacker/pseudify-ai:2.0 pseudify:debug:table_schema</code></pre>
<h4 id="pseudify-is-running-using-docker-compose-analyze-setup">pseudify is running using docker compose (<code>analyze setup</code>)</h4>
<p>Add the OPTION <code>extra_hosts: ['host.docker.internal:host-gateway']</code> in the install package file <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/docker-compose.yml">docker-compose.yml</a> like:</p>
<pre class="highlight"><code class="language-yaml">services:
  pseudify:
    # ...
    extra_hosts:
      - 'host.docker.internal:host-gateway'</code></pre>
<p>The option <code>PSEUDIFY_DATABASE_HOST</code> in the install package file <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/userdata/.env">userdata/.env</a> must be set to <code>host.docker.internal</code>.   </p>
<p>Then start pseudify like:</p>
<pre class="highlight"><code class="language-shell">$ docker compose up -d</code></pre>
<h3 id="access-a-database-using-docker-services">Access a database using docker services</h3>
<h4 id="pseudify-is-running-as-a-standalone-binary-pseudonymization-setup_1">pseudify is running as a standalone binary (<code>pseudonymization setup</code>)</h4>
<p><a href="https://docs.docker.com/engine/reference/commandline/network_create/">Create a docker network</a> with the name <code>pseudify-net</code> (if none already exists):</p>
<pre class="highlight"><code class="language-shell">$ docker network create pseudify-net</code></pre>
<p>Start a database server using the network <code>pseudify-net</code> (<code>--network pseudify-net</code>).<br />
The database container is given the name <code>mariadb_10_5</code> (<code>--name mariadb_10_5</code>).<br />
Therefore the option <code>PSEUDIFY_DATABASE_HOST</code> in the install package file <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/userdata/.env">userdata/.env</a> must be set to <code>mariadb_10_5</code>.   </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the import of the test database (<code>-v "$(pwd)"/database-data:/docker-entrypoint-initdb.d</code>) to work correctly, the command must be executed in the main directory of the install package.</p>
</div>
<pre class="highlight"><code class="language-shell">$ docker run --rm --detach \
    --network pseudify-net \
    --name mariadb_10_5 \
    --env MARIADB_USER=pseudify \
    --env MARIADB_PASSWORD='P53ud1fy(!)w4ldh4ck3r' \
    --env MARIADB_ROOT_PASSWORD='P53ud1fy(!)w4ldh4ck3r' \
    --env MARIADB_DATABASE=pseudify_utf8mb4 \
    -v "$(pwd)"/database-data:/docker-entrypoint-initdb.d \
    mariadb:10.5</code></pre>
<p>Then run pseudify like:</p>
<pre class="highlight"><code class="language-shell">$ docker run --rm -it --add-host=host.docker.internal:host-gateway -v "$(pwd)/userdata/":/opt/pseudify/userdata/ \
    ghcr.io/waldhacker/pseudify-ai:2.0 pseudify:debug:table_schema</code></pre>
<h4 id="pseudify-is-running-using-docker-compose-analyze-setup_1">pseudify is running using docker compose (<code>analyze setup</code>)</h4>
<p>You can use the install package file <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/docker-compose.database.yml">docker-compose.database.yml</a> and adapt it to your needs.<br />
The option <code>PSEUDIFY_DATABASE_HOST</code> in the install package file <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/userdata/.env">userdata/.env</a> must be set to database <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/docker-compose.database.yml#L7">service name</a> like <code>mariadb_10_5</code>.   </p>
<p>Then start pseudify like:</p>
<pre class="highlight"><code class="language-shell">$ docker compose -f docker-compose.yml -f docker-compose.database.yml up -d</code></pre>
<h2 id="debug-the-configuration">Debug the configuration</h2>
<p>Commands exist to check the configuration of the system.</p>
<h3 id="pseudifyinformation">pseudify:information</h3>
<p>The command <code>pseudify pseudify:information</code> lists:</p>
<ul>
<li>available profiles to analyse the database (<code>Registered analyse profiles</code>)</li>
<li>available profiles to pseudonymise the database (<code>Registered pseudonymize profiles</code>)</li>
<li>registered database types</li>
<li>registered condition expressions</li>
<li>registered encoders / decoders</li>
<li>database drivers available in the system (<code>Available built-in database drivers</code>)</li>
<li>information per configured connection (<code>Connection information for connection "&lt;connecntion name&gt;"</code>)</li>
<li>information about which database types are associated with which doctrine implementations (<code>Registered doctrine database data type mappings</code>)</li>
<li>information about the doctrine driver implementations used and the system driver used (<code>Connection details</code>).</li>
</ul>
<h3 id="debugconfig-doctrinebundle">debug:config DoctrineBundle</h3>
<p>The command lists the combined database configuration, which consists of the <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/src/config/packages/doctrine.yaml">core configuration</a><br />
and the <a href="https://github.com/waldhacker/pseudify-ai/blob/2.0.0/userdata/config/configuration.yaml">user-defined configuration from the install package</a>.</p>
<h3 id="debugdotenv">debug:dotenv</h3>
<p>The command lists the values from the <code>.env</code> file.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../installation/" class="btn btn-neutral float-left" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../usage/" class="btn btn-neutral float-right" title="Analyse and pseudonymize the database">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>waldhacker UG (haftungsbeschrÃ¤nkt)</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/waldhacker/pseudify-page/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../installation/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../usage/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
</script></body>
</html>
